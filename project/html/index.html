<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­åæ–‡ç‰©æ•°å­—ä¿æŠ¤å¹³å° | Digital Heritage Protection</title>
    
    <!-- Tailwind CSS -->
    <script src="../js/tail.js"></script>
    
    <!-- Chart.js -->
    <script src="../js/chart.js"></script>
    <link rel="stylesheet" href="../css/style.css">
    <!-- Google Fonts (Noto Serif SC for headings, Noto Sans SC for body) -->
    <!-- <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet"> -->

    <!-- Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        heritage: {
                            bg: '#f9f7f2',       /* Warm Rice Paper */
                            primary: '#8c4b31',  /* Terracotta/Bronze */
                            secondary: '#2c3e50',/* Charcoal/Ink */
                            accent: '#d4af37',   /* Muted Gold */
                            text: '#4a4a4a',     /* Dark Grey Text */
                            card: '#ffffff'
                        }
                    },
                    fontFamily: {
                        serif: ['"Noto Serif SC"', 'serif'],
                        sans: ['"Noto Sans SC"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-heritage-bg text-heritage-text font-sans antialiased overflow-x-hidden selection:bg-heritage-primary selection:text-white">

    <!-- REQUIRED PLACEHOLDERS -->
    <!-- Chosen Palette: Warm Heritage. -->
    
    <!-- Application Structure Plan:
         Updated to include Gemini AI integrations:
         1. **Navigation & Home:** Standard navigation and dashboard overview.
         2. **Museum (AI Enhanced):** Grid of artifacts. Clicking opens a Modal. The Modal now features a "Gemini AI Guide" button that generates a dynamic story about the artifact.
         3. **News:** Dynamic feed.
         4. **Technology (AI Enhanced):** Contains a new interactive "AI Restoration Consultant" chat interface powered by Gemini to answer user questions about preservation techniques.
         5. **Contact:** Standard form.
    -->

    <!-- Visualization & Content Choices:
         ... Standard charts preserved ...
         **Gemini Integration:**
         - **AI Guide:** Uses Gemini to generate text based on artifact name context.
         - **Restoration Chat:** Uses Gemini to answer free-form text queries.
         CONFIRMATION: NO SVG graphics used (Tailwind/Unicode used). NO Mermaid JS used.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md shadow-sm border-b border-stone-200">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center cursor-pointer" onclick="navigateTo('home')">
                    <span class="text-3xl mr-2">ğŸ›ï¸</span>
                    <div>
                        <h1 class="font-serif text-2xl font-bold text-heritage-secondary tracking-wide">äº‘ç«¯åšç‰©</h1>
                        <p class="text-xs text-heritage-primary tracking-widest uppercase">Digital Heritage Guard</p>
                    </div>
                </div>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8">
                    <button onclick="navigateTo('home')" class="nav-btn text-heritage-secondary hover:text-heritage-primary font-medium transition-colors border-b-2 border-transparent hover:border-heritage-primary pb-1">é¦–é¡µæ¦‚è§ˆ</button>
                    <button onclick="navigateTo('museum')" class="nav-btn text-heritage-secondary hover:text-heritage-primary font-medium transition-colors border-b-2 border-transparent hover:border-heritage-primary pb-1">æ–‡ç‰©è¯¦æƒ…</button>
                    <button onclick="navigateTo('news')" class="nav-btn text-heritage-secondary hover:text-heritage-primary font-medium transition-colors border-b-2 border-transparent hover:border-heritage-primary pb-1">æ–°é—»åŠ¨æ€</button>
                    <button onclick="navigateTo('tech')" class="nav-btn text-heritage-secondary hover:text-heritage-primary font-medium transition-colors border-b-2 border-transparent hover:border-heritage-primary pb-1">å‰æ²¿æŠ€æœ¯</button>
                    <button onclick="navigateTo('contact')" class="nav-btn px-4 py-2 bg-heritage-primary text-white rounded hover:bg-opacity-90 transition-all shadow-md">è”ç³»æˆ‘ä»¬</button>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button id="mobile-menu-btn" class="text-heritage-secondary focus:outline-none">
                        <span class="text-2xl">â˜°</span>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu Dropdown -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-stone-100 p-4 shadow-lg">
            <div class="flex flex-col space-y-4">
                <button onclick="navigateTo('home')" class="text-left text-heritage-secondary font-medium">é¦–é¡µæ¦‚è§ˆ</button>
                <button onclick="navigateTo('museum')" class="text-left text-heritage-secondary font-medium">æ–‡ç‰©è¯¦æƒ…</button>
                <button onclick="navigateTo('news')" class="text-left text-heritage-secondary font-medium">æ–°é—»åŠ¨æ€</button>
                <button onclick="navigateTo('tech')" class="text-left text-heritage-secondary font-medium">å‰æ²¿æŠ€æœ¯</button>
                <button onclick="navigateTo('contact')" class="text-left text-heritage-primary font-bold">è”ç³»æˆ‘ä»¬</button>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <main id="app-content" class="min-h-screen">
        
        <!-- SECTION: HOME / OVERVIEW -->
        <section id="home" class="page-section fade-in">
            <!-- Hero Banner -->
            <div class="relative w-full h-[60vh] flex items-center justify-center bg-stone-800 text-white overflow-hidden">
                <img src="https://images.unsplash.com/photo-1599827059754-08eb4c130ba8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80" alt="Ancient Architecture" class="absolute inset-0 w-full h-full object-cover opacity-40">
                <div class="relative z-10 text-center px-4 max-w-4xl mx-auto">
                    <h2 class="font-serif text-4xl md:text-6xl font-bold mb-6 drop-shadow-lg">å®ˆæŠ¤å†å²ï¼Œä¼ æ‰¿æ–‡æ˜</h2>
                    <p class="text-lg md:text-xl text-stone-200 mb-8 max-w-2xl mx-auto leading-relaxed">
                        æ¯ä¸€ä»¶æ–‡ç‰©éƒ½æ˜¯å†å²çš„è§è¯ã€‚æˆ‘ä»¬è‡´åŠ›äºåˆ©ç”¨ç°ä»£ç§‘æŠ€æ‰‹æ®µï¼Œæ•°å­—åŒ–ä¿å­˜ã€ä¿®å¤å’Œå±•ç¤ºä¸­åæ–‡æ˜çš„ç‘°å®ï¼Œè®©åƒå¹´æ–‡åŒ–è§¦æ‰‹å¯åŠã€‚
                    </p>
                    <button onclick="navigateTo('museum')" class="px-8 py-3 bg-heritage-primary hover:bg-orange-800 text-white font-semibold rounded-sm transition-all shadow-lg transform hover:-translate-y-1">
                        æ¢ç´¢æ•°å­—é¦†è—
                    </button>
                </div>
            </div>

            <!-- Stats Dashboard -->
            <div class="container mx-auto px-4 py-16">
                <div class="mb-12 text-center">
                    <h3 class="font-serif text-3xl font-bold text-heritage-secondary mb-4">å½“å‰ä¿æŠ¤æ¦‚å†µ</h3>
                    <p class="text-stone-600 max-w-2xl mx-auto">
                        é€šè¿‡å¯¹å…¨å›½é‡ç‚¹æ–‡ç‰©çš„æ™®æŸ¥ä¸æ•°å­—åŒ–å»ºæ¡£ï¼Œæˆ‘ä»¬ä¸ä»…æŒæ¡äº†æ–‡ç‰©çš„ç°çŠ¶ï¼Œæ›´é€šè¿‡æ•°æ®åˆ†æåˆ¶å®šäº†æ›´ç²¾å‡†çš„ä¿®å¤è®¡åˆ’ã€‚ä»¥ä¸‹æ˜¯ç›®å‰çš„é¦†è—ä¸ä¿®å¤è¿›åº¦æ¦‚è§ˆã€‚
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
                    <!-- Text Stats -->
                    <div class="grid grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow-sm border-t-4 border-heritage-primary">
                            <div class="text-4xl font-bold text-heritage-primary mb-2">5,200+</div>
                            <div class="text-sm text-stone-500 font-medium">å·²å»ºæ¡£æ–‡ç‰©</div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-sm border-t-4 border-heritage-accent">
                            <div class="text-4xl font-bold text-heritage-accent mb-2">128</div>
                            <div class="text-sm text-stone-500 font-medium">æ­£åœ¨ä¿®å¤</div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-sm border-t-4 border-heritage-secondary">
                            <div class="text-4xl font-bold text-heritage-secondary mb-2">98%</div>
                            <div class="text-sm text-stone-500 font-medium">å®Œå¥½ä¿å­˜ç‡</div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-sm border-t-4 border-stone-400">
                            <div class="text-4xl font-bold text-stone-600 mb-2">350ä¸‡</div>
                            <div class="text-sm text-stone-500 font-medium">çº¿ä¸Šè®¿é—®äººæ¬¡</div>
                        </div>
                    </div>

                    <!-- Chart Container -->
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h4 class="font-serif text-lg font-bold text-heritage-secondary mb-4 text-center">æ–‡ç‰©å®Œå¥½åº¦ä¸ä¿®å¤éœ€æ±‚åˆ†å¸ƒ</h4>
                        <div class="chart-container">
                            <canvas id="preservationChart"></canvas>
                        </div>
                        <p class="text-xs text-center text-stone-400 mt-2">æ•°æ®æ¥æºï¼š2025å¹´åº¦æ–‡ç‰©æ™®æŸ¥æŠ¥å‘Š</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: MUSEUM / ARTIFACTS -->
        <section id="museum" class="page-section hidden fade-in py-12 bg-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="font-serif text-3xl md:text-4xl font-bold text-heritage-secondary mb-4">æ–‡ç‰©è¯¦æƒ… Â· æ•°å­—åšç‰©é¦†</h2>
                    <p class="text-stone-600 max-w-3xl mx-auto">
                        åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥è¿‘è·ç¦»è§‚å¯Ÿç¨€ä¸–çå®ã€‚æˆ‘ä»¬åˆ©ç”¨é«˜ç²¾åº¦æ‘„å½±ä¸ä¸‰ç»´å»ºæ¨¡æŠ€æœ¯ï¼Œè¿˜åŸäº†æ–‡ç‰©çš„æ¯ä¸€ä¸ªç»†èŠ‚ã€‚ç‚¹å‡»å¡ç‰‡å¯æŸ¥çœ‹æ–‡ç‰©çš„å‘æ˜å†å²ä¸ä¿®å¤è®°å½•ã€‚
                    </p>
                    
                    <!-- Filters -->
                    <div class="flex flex-wrap justify-center gap-4 mt-8">
                        <button onclick="filterArtifacts('all')" class="filter-btn active px-4 py-2 rounded-full border border-stone-300 hover:bg-heritage-primary hover:text-white hover:border-transparent transition-all" data-filter="all">å…¨éƒ¨</button>
                        <button onclick="filterArtifacts('bronze')" class="filter-btn px-4 py-2 rounded-full border border-stone-300 hover:bg-heritage-primary hover:text-white hover:border-transparent transition-all" data-filter="bronze">é’é“œå™¨</button>
                        <button onclick="filterArtifacts('ceramics')" class="filter-btn px-4 py-2 rounded-full border border-stone-300 hover:bg-heritage-primary hover:text-white hover:border-transparent transition-all" data-filter="ceramics">é™¶ç“·</button>
                        <button onclick="filterArtifacts('painting')" class="filter-btn px-4 py-2 rounded-full border border-stone-300 hover:bg-heritage-primary hover:text-white hover:border-transparent transition-all" data-filter="painting">ä¹¦ç”»</button>
                        <button onclick="filterArtifacts('jade')" class="filter-btn px-4 py-2 rounded-full border border-stone-300 hover:bg-heritage-primary hover:text-white hover:border-transparent transition-all" data-filter="jade">ç‰å™¨</button>
                    </div>
                </div>

                <!-- Gallery Grid -->
                <div id="artifact-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                    <!-- Artifact Cards will be injected by JS -->
                </div>
            </div>
        </section>

        <!-- SECTION: NEWS -->
        <section id="news" class="page-section hidden fade-in py-12">
            <div class="container mx-auto px-4 max-w-5xl">
                <div class="mb-10 border-b border-stone-300 pb-4">
                    <h2 class="font-serif text-3xl font-bold text-heritage-secondary">æœ€è¿‘çš„æ–°é—»åŠ¨æ€</h2>
                    <p class="text-stone-600 mt-2">å…³æ³¨æ–‡ç‰©ä¿æŠ¤é¢†åŸŸçš„æœ€æ–°å‘ç°ã€æ”¿ç­–è§£è¯»ä¸å­¦æœ¯äº¤æµã€‚</p>
                </div>

                <div id="news-container" class="space-y-6">
                    <!-- News Items Injected JS -->
                </div>
                
                <div class="text-center mt-10">
                    <button class="text-heritage-primary font-medium hover:underline cursor-pointer">æŸ¥çœ‹æ›´å¤šå†å²æ–°é—» &rarr;</button>
                </div>
            </div>
        </section>

        <!-- SECTION: TECHNOLOGY -->
        <section id="tech" class="page-section hidden fade-in py-12 bg-stone-100">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="font-serif text-3xl font-bold text-heritage-secondary mb-4">ç§‘æŠ€èµ‹èƒ½ Â· æ–‡ç‰©æ–°ç”Ÿ</h2>
                    <p class="text-stone-600 max-w-3xl mx-auto">
                        ç°ä»£ç§‘æŠ€æ­£åœ¨æ”¹å˜æ–‡ç‰©ä¿æŠ¤çš„æ–¹å¼ã€‚ä»AIè¯†åˆ«ç¢ç‰‡æ‹¼æ¥ï¼Œåˆ°ç¯å¢ƒç›‘æµ‹ä¼ æ„Ÿå™¨ï¼Œç§‘å­¦æŠ€æœ¯å¤§å¤§æé«˜äº†ä¿®å¤æ•ˆç‡ä¸æ–‡ç‰©çš„å®‰å…¨æ€§ã€‚
                    </p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
                    <!-- Feature List & Chart -->
                    <div class="space-y-6">
                        <div class="bg-white p-6 rounded-lg shadow-sm flex items-start space-x-4">
                            <div class="bg-heritage-primary text-white p-3 rounded-full text-xl shrink-0">ğŸ“¡</div>
                            <div>
                                <h4 class="font-bold text-lg text-heritage-secondary">LiDAR æ¿€å…‰é›·è¾¾æ‰«æ</h4>
                                <p class="text-sm text-stone-600 mt-1">å¯¹çŸ³çªŸã€å¤å»ºç­‘è¿›è¡Œæ¯«ç±³çº§ä¸‰ç»´å»ºæ¨¡ï¼Œä¸ºæ•°å­—åŒ–å­˜æ¡£å’Œè™šæ‹Ÿä¿®å¤æä¾›ç²¾ç¡®çš„åŸºç¡€æ•°æ®ã€‚</p>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-sm flex items-start space-x-4">
                            <div class="bg-heritage-primary text-white p-3 rounded-full text-xl shrink-0">ğŸ§¬</div>
                            <div>
                                <h4 class="font-bold text-lg text-heritage-secondary">å¤šå…‰è°±æˆåƒåˆ†æ</h4>
                                <p class="text-sm text-stone-600 mt-1">é€è¿‡è¡¨é¢æ±¡æ¸æŸ¥çœ‹è‚‰çœ¼ä¸å¯è§çš„å¢¨è¿¹æˆ–é¢œæ–™å±‚ï¼Œç”¨äºå¤ä¹¦ç”»çš„æ— æŸæ£€æµ‹ä¸çœŸä¼ªé‰´å®šã€‚</p>
                            </div>
                        </div>
                        
                        <!-- Tech Chart -->
                        <div class="bg-white p-8 rounded-xl shadow-lg mt-6">
                            <h4 class="font-serif text-lg font-bold text-heritage-secondary mb-6 text-center">ä¼ ç»Ÿä¿®å¤ vs AIè¾…åŠ©ä¿®å¤ æ•ˆç‡å¯¹æ¯”</h4>
                            <div class="chart-container">
                                <canvas id="techChart"></canvas>
                            </div>
                            <div class="mt-4 p-4 bg-yellow-50 rounded text-sm text-yellow-800 border border-yellow-100">
                                <strong>åˆ†æç»“è®ºï¼š</strong> å¼•å…¥AIè¾…åŠ©æŠ€æœ¯åï¼Œç‰¹åˆ«æ˜¯åœ¨ç¢ç‰‡æ‹¼æ¥å’Œè‰²å½©è¿˜åŸç¯èŠ‚ï¼Œå¹³å‡å·¥æ—¶å‡å°‘äº†çº¦45%ã€‚
                            </div>
                        </div>
                    </div>

                    <!-- Gemini AI Integration: Restoration Consultant -->
                    <div class="bg-white rounded-xl shadow-xl overflow-hidden border border-purple-100 relative">
                         <!-- Decorative gradient background -->
                        <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-purple-500 to-heritage-primary"></div>
                        
                        <div class="p-8">
                            <div class="flex items-center mb-6">
                                <div class="bg-purple-100 p-3 rounded-full mr-4 text-2xl">âœ¨</div>
                                <div>
                                    <h3 class="font-serif text-2xl font-bold text-heritage-secondary">AI ä¿®å¤é¡¾é—®</h3>
                                    <p class="text-xs text-purple-600 font-medium">Powered by Gemini AI</p>
                                </div>
                            </div>
                            
                            <p class="text-stone-600 text-sm mb-6">
                                é‡åˆ°æ–‡ç‰©ä¿æŠ¤éš¾é¢˜ï¼Ÿæˆ‘æ˜¯æ‚¨çš„æ™ºèƒ½åŠ©æ‰‹ã€‚æ— è®ºæ˜¯å…³äºé’é“œå™¨é™¤é”ˆã€å­—ç”»é˜²æ½®ï¼Œè¿˜æ˜¯é™¶ç“·æ‹¼æ¥ï¼Œæˆ‘éƒ½èƒ½ä¸ºæ‚¨è§£ç­”ã€‚
                            </p>

                            <div class="mb-4">
                                <label class="block text-xs font-bold text-heritage-text uppercase tracking-wide mb-2">æ‚¨çš„é—®é¢˜</label>
                                <textarea id="ai-tech-input" rows="3" class="w-full px-4 py-3 rounded bg-stone-50 border border-stone-200 focus:border-purple-500 focus:outline-none transition-colors" placeholder="ä¾‹å¦‚ï¼šå¤ä»£å­—ç”»å‘é»„äº†åº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ"></textarea>
                            </div>
                            
                            <button onclick="askRestorationAI()" id="ai-tech-btn" class="w-full bg-gradient-to-r from-heritage-secondary to-purple-800 text-white font-bold py-3 px-6 rounded hover:opacity-90 transition-all shadow-md flex justify-center items-center">
                                <span>å¼€å§‹å’¨è¯¢</span>
                            </button>

                            <!-- AI Output Area -->
                            <div id="ai-tech-output" class="hidden mt-6 bg-purple-50 p-5 rounded-lg border border-purple-100 text-sm text-stone-700 leading-relaxed relative">
                                <!-- Content injected here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: CONTACT -->
        <section id="contact" class="page-section hidden fade-in py-12">
            <div class="container mx-auto px-4 max-w-4xl">
                <div class="bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col md:flex-row">
                    <!-- Info Side -->
                    <div class="bg-heritage-secondary text-white p-10 md:w-1/3 flex flex-col justify-between">
                        <div>
                            <h3 class="font-serif text-2xl font-bold mb-6">è”ç³»æˆ‘ä»¬</h3>
                            <p class="text-stone-300 text-sm mb-8">æ— è®ºæ˜¯æ–‡ç‰©æèµ å’¨è¯¢ã€å­¦æœ¯åˆä½œï¼Œè¿˜æ˜¯å¿—æ„¿æœåŠ¡ç”³è¯·ï¼Œæˆ‘ä»¬éƒ½æœŸå¾…æ‚¨çš„å£°éŸ³ã€‚</p>
                            
                            <div class="space-y-4 text-sm">
                                <div class="flex items-center">
                                    <span class="mr-3">ğŸ“</span>
                                    <span>åŒ—äº¬å¸‚ä¸œåŸåŒºæ–‡åšè·¯8å·</span>
                                </div>
                                <div class="flex items-center">
                                    <span class="mr-3">ğŸ“§</span>
                                    <span>contact@digitalheritage.cn</span>
                                </div>
                                <div class="flex items-center">
                                    <span class="mr-3">â˜ï¸</span>
                                    <span>+86 10 8888 6666</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-10">
                            <div class="text-xs text-stone-400 uppercase tracking-widest mb-2">Follow Us</div>
                            <div class="flex space-x-4 text-lg">
                                <a href="#" class="hover:text-heritage-accent">WeChat</a>
                                <a href="#" class="hover:text-heritage-accent">Weibo</a>
                            </div>
                        </div>
                    </div>

                    <!-- Form Side -->
                    <div class="p-10 md:w-2/3 bg-stone-50">
                        <form id="contactForm" onsubmit="handleContactSubmit(event)">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <div>
                                    <label class="block text-xs font-bold text-heritage-text uppercase tracking-wide mb-2">å§“å</label>
                                    <input type="text" id="name" required class="w-full px-4 py-3 rounded bg-white border border-stone-200 focus:border-heritage-primary focus:outline-none transition-colors" placeholder="æ‚¨çš„ç§°å‘¼">
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-heritage-text uppercase tracking-wide mb-2">é‚®ç®±</label>
                                    <input type="email" id="email" required class="w-full px-4 py-3 rounded bg-white border border-stone-200 focus:border-heritage-primary focus:outline-none transition-colors" placeholder="user@example.com">
                                </div>
                            </div>
                            <div class="mb-6">
                                <label class="block text-xs font-bold text-heritage-text uppercase tracking-wide mb-2">ä¸»é¢˜</label>
                                <select id="subject" class="w-full px-4 py-3 rounded bg-white border border-stone-200 focus:border-heritage-primary focus:outline-none transition-colors">
                                    <option>æ™®é€šå’¨è¯¢</option>
                                    <option>æ–‡ç‰©çº¿ç´¢æä¾›</option>
                                    <option>å¿—æ„¿è€…ç”³è¯·</option>
                                    <option>æŠ€æœ¯åˆä½œ</option>
                                </select>
                            </div>
                            <div class="mb-6">
                                <label class="block text-xs font-bold text-heritage-text uppercase tracking-wide mb-2">ç•™è¨€å†…å®¹</label>
                                <textarea id="message" required rows="4" class="w-full px-4 py-3 rounded bg-white border border-stone-200 focus:border-heritage-primary focus:outline-none transition-colors" placeholder="è¯·è¯¦ç»†æè¿°æ‚¨çš„éœ€æ±‚..."></textarea>
                            </div>
                            <button type="submit" class="w-full bg-heritage-primary text-white font-bold py-3 px-6 rounded hover:bg-opacity-90 transition-transform transform active:scale-95 shadow-md">
                                å‘é€ç•™è¨€
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- FOOTER -->
        <footer class="bg-heritage-secondary text-stone-400 py-8 mt-12">
            <div class="container mx-auto px-4 text-center">
                <p class="font-serif text-lg text-white mb-2">äº‘ç«¯åšç‰© Â· å†å²åœ¨æŒ‡å°–æµæ·Œ</p>
                <p class="text-sm">Â© 2024 æ–‡ç‰©ä¿æŠ¤ Web å‰ç«¯è¯¾ç¨‹è®¾è®¡å°ç»„. All rights reserved.</p>
                <div class="mt-4 text-xs">
                    <span>éšç§æ”¿ç­–</span> | <span>ä½¿ç”¨æ¡æ¬¾</span> | <span>ç½‘ç«™åœ°å›¾</span>
                </div>
            </div>
        </footer>

    </main>

    <!-- Modal Overlay -->
    <div id="modal-overlay" class="fixed inset-0 bg-black bg-opacity-70 z-[60] hidden flex items-center justify-center p-4 backdrop-blur-sm" onclick="closeModal()">
        <div class="bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl transform transition-all scale-95" id="modal-content" onclick="event.stopPropagation()">
            <!-- Dynamic Content -->
            <div class="relative">
                <button onclick="closeModal()" class="absolute top-4 right-4 bg-stone-100 hover:bg-stone-200 rounded-full p-2 text-stone-600 transition-colors z-10">âœ•</button>
                <div id="modal-body" class="p-0">
                    <!-- JS fills this -->
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- 0. GEMINI API CONFIG ---
        const apiKey = ""; // Runtime Environment will provide key

        async function callGeminiAPI(prompt) {
            if (!apiKey) {
                console.warn("API Key missing (simulating logic for demo if needed, but intended for real env)");
                // Just in case we are in a no-key env, we might want to fail gracefully or show mock
                // return "API Key not configured."; 
            }

            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }]
            };

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }

                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text || "æŠ±æ­‰ï¼Œæˆ‘æš‚æ—¶æ— æ³•å›ç­”è¿™ä¸ªé—®é¢˜ã€‚";
            } catch (error) {
                console.error("Gemini API Error:", error);
                return "ç½‘ç»œè¿æ¥å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•ã€‚";
            }
        }

        // --- 1. DATA STORAGE ---

        // Artifact Data
        const artifacts = [
            {
                id: 1,
                name: "å››ç¾Šæ–¹å°Š",
                category: "bronze",
                period: "å•†ä»£æ™šæœŸ",
                image: "https://images.unsplash.com/photo-1599839575945-a9e5af0c3fa5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                desc: "å››ç¾Šæ–¹å°Šæ˜¯ä¸­å›½ç°å­˜å•†ä»£é’é“œæ–¹å°Šä¸­æœ€å¤§çš„ä¸€ä»¶ã€‚å…¶é€ å‹ç‹¬ç‰¹ï¼Œè‚©éƒ¨å››è§’å„å¡‘ä¸€ç¾Šï¼Œç¾Šé¦–å‘å¤–ï¼Œç¾Šè§’å·æ›²ï¼Œç¥æ€å®‰è¯¦ã€‚",
                details: "ä¿®å¤å†å²ï¼š1938å¹´å‡ºåœŸæ—¶ç¢ä¸º20ä½™å—ï¼Œåç»æ¸…æ´—ã€ç„Šæ¥ã€è¡¥é…ã€éšè‰²ç­‰å·¥åºä¿®å¤å®Œæ•´ã€‚æœ€è¿‘ä¸€æ¬¡æ•°å­—åŒ–æ‰«ææ˜¾ç¤ºå…¶å†…å£æœ‰é“­æ–‡ç—•è¿¹ã€‚",
                status: "å®Œå¥½ (Level A)"
            },
            {
                id: 2,
                name: "ç¿ ç‰ç™½èœ",
                category: "jade",
                period: "æ¸…ä»£",
                image: "https://images.unsplash.com/photo-1608371945634-3168807897df?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                desc: "åˆ©ç”¨ç¿¡ç¿ å¤©ç„¶çš„è‰²æ³½é›•åˆ»è€Œæˆï¼Œå¯“æ„æ¸…ç™½ã€‚èœå¶ä¸Šåœç•™çš„ä¸¤åªæ˜†è™«æ˜¯è½æ–¯å’Œè—è™«ï¼Œå¯“æ„å¤šå­å¤šå­™ã€‚",
                details: "ç»´æŠ¤è®°å½•ï¼šå®šæœŸè¿›è¡Œæ’æ¸©æ’æ¹¿ç¯å¢ƒç›‘æµ‹ã€‚2021å¹´å‘ç°å¾®å°è£‚çº¹é£é™©ï¼Œå·²åŠ å¼ºé˜²éœ‡æ”¯æ¶ä¿æŠ¤ã€‚",
                status: "éœ€ç›‘æµ‹ (Level B)"
            },
            {
                id: 3,
                name: "é’èŠ±ç“·ç›˜",
                category: "ceramics",
                period: "æ˜ä»£",
                image: "https://images.unsplash.com/photo-1610136896225-4c0977218688?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                desc: "ç›˜å¿ƒç»˜æœ‰ç¼ æè²çº¹ï¼Œé‡‰è‰²æ¸©æ¶¦ï¼Œé’èŠ±å‘è‰²æµ“è‰³ï¼Œæ˜¯æ˜ä»£å®˜çª‘çš„ä»£è¡¨ä½œã€‚",
                details: "æŠ€æœ¯åˆ†æï¼šé€šè¿‡Xå°„çº¿è§å…‰å…‰è°±åˆ†æï¼Œç¡®å®šå…¶é’´æ–™æ¥è‡ªè¿›å£çš„è‹éº»ç¦»é’ã€‚",
                status: "å®Œå¥½ (Level A)"
            },
            {
                id: 4,
                name: "åƒé‡Œæ±Ÿå±±å›¾(å±€éƒ¨)",
                category: "painting",
                period: "åŒ—å®‹",
                image: "https://images.unsplash.com/photo-1580137189272-c9379f8864fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                desc: "ç‹å¸Œå­Ÿ18å²æ—¶æ‰€ä½œï¼Œä»¥çŸ³é’ã€çŸ³ç»¿ç­‰çŸ¿ç‰©é¢œæ–™ç»˜æˆï¼Œè‰²å½©ç»šä¸½ï¼Œæ°”åŠ¿æ¢å®ã€‚",
                details: "ä¿æŠ¤ç°çŠ¶ï¼šå› çŸ¿ç‰©é¢œæ–™æ˜“è„±è½ï¼Œæå°‘å±•å‡ºã€‚ç›®å‰ä¸»è¦é€šè¿‡8Ké«˜æ¸…æ•°å­—å‰¯æœ¬ä¾›å…¬ä¼—æ¬£èµã€‚",
                status: "æè„†å¼± (Level S)"
            },
            {
                id: 5,
                name: "ä¸‰æ˜Ÿå †é‡‘é¢å…·",
                category: "bronze",
                period: "å•†ä»£",
                image: "https://images.unsplash.com/photo-1549886367-a5eb10b65672?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                desc: "å±•ç¤ºäº†å¤èœ€æ–‡æ˜ç‹¬ç‰¹çš„å®¡ç¾ä¸é«˜è¶…çš„é»„é‡‘åŠ å·¥å·¥è‰ºã€‚",
                details: "å‡ºåœŸæƒ…å†µï¼š2021å¹´å‡ºåœŸäºç¥­ç¥€å‘ï¼Œå‡ºåœŸæ—¶è¢«å‹çš±ã€‚é€šè¿‡æ•°å­—å±•å¼€æŠ€æœ¯è¿˜åŸäº†å…¶åŸæœ¬å½¢æ€ã€‚",
                status: "ä¿®å¤ä¸­ (Level C)"
            },
            {
                id: 6,
                name: "ç™½ç‰é¾™é’®å°",
                category: "jade",
                period: "æ±‰ä»£",
                image: "https://images.unsplash.com/photo-1627931666687-3450953a9686?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                desc: "æ±‰ä»£çš‡å®¤ä¸“ç”¨å°ç« ï¼Œç‰è´¨æ´ç™½æ— ç‘•ï¼Œé¾™é’®é›•åˆ»ç²¾ç»†ã€‚",
                details: "æ— æ˜æ˜¾ç ´æŸï¼Œä¸»è¦è¿›è¡Œå®šæœŸæ¸…æ´ä¸è¡¨é¢å°æŠ¤ã€‚",
                status: "å®Œå¥½ (Level A)"
            }
        ];

        // News Data
        const newsData = [
            {
                id: 1,
                title: "å›½å®¶æ–‡ç‰©å±€å‘å¸ƒã€Šâ€œåå››äº”â€æ–‡ç‰©ä¿æŠ¤å’Œç§‘æŠ€åˆ›æ–°è§„åˆ’ã€‹",
                date: "2024-05-15",
                summary: "è§„åˆ’æ˜ç¡®æå‡ºè¦åŠ å¼ºæ–‡ç‰©ç§‘æŠ€åˆ›æ–°ï¼Œå»ºç«‹å›½å®¶çº§æ–‡ç‰©ä¿æŠ¤ç§‘ç ”å¹³å°ï¼Œé‡ç‚¹çªç ´åœŸé—å€ä¿æŠ¤ã€æœ‰æœºè´¨æ–‡ç‰©ä¿æŠ¤ç­‰å…³é”®æŠ€æœ¯ç“¶é¢ˆã€‚",
                content: "è¯¦ç»†å†…å®¹ï¼šè§„åˆ’æŒ‡å‡ºï¼Œåˆ°2025å¹´ï¼Œæˆ‘å›½æ–‡ç‰©ç§‘æŠ€åˆ›æ–°èƒ½åŠ›æ˜¾è‘—å¢å¼ºï¼Œæ–‡ç‰©ä¿æŠ¤åˆ©ç”¨æ°´å¹³å…¨é¢æå‡ã€‚é‡ç‚¹ä»»åŠ¡åŒ…æ‹¬ï¼š1. å»ºè®¾å›½å®¶æ–‡åŒ–é—äº§ç§‘æŠ€åˆ›æ–°ä¸­å¿ƒã€‚2. æ”»å…‹ä¸€æ‰¹æ–‡ç‰©ä¿æŠ¤å…³é”®æ ¸å¿ƒæŠ€æœ¯ã€‚3. å®Œå–„æ–‡ç‰©ç§‘æŠ€äººæ‰åŸ¹å…»ä½“ç³»ã€‚è¿™å°†ä¸ºæˆ‘å›½ä»æ–‡ç‰©èµ„æºå¤§å›½å‘æ–‡ç‰©ä¿æŠ¤å¼ºå›½è·¨è¶Šæä¾›æœ‰åŠ›æ”¯æ’‘ã€‚"
            },
            {
                id: 2,
                title: "æ•°å­—æ•¦ç…Œé¡¹ç›®æ–°æˆæœï¼š30ä¸ªæ´çªŸå®ç°å…¨çƒé«˜æ¸…è™šæ‹Ÿæ¼«æ¸¸",
                date: "2024-04-20",
                summary: "â€œæ•°å­—æ•¦ç…Œâ€æ•°æ®åº“å†æ¬¡æ‰©å®¹ï¼Œåˆ©ç”¨æ¯«ç±³çº§æ¿€å…‰æ‰«ææŠ€æœ¯ï¼Œå°†è«é«˜çªŸä¸å¯ç§»åŠ¨çš„å£ç”»å˜æˆäº†å¯æ°¸ä¹…ä¿å­˜çš„æ•°å­—èµ„äº§ã€‚",
                content: "è¯¦ç»†å†…å®¹ï¼šç»è¿‡æŠ€æœ¯å›¢é˜Ÿå†æ—¶3å¹´çš„æ”»å…³ï¼Œæœ¬æ¬¡ä¸Šçº¿çš„æ´çªŸåŒ…æ‹¬ç››å”æ—¶æœŸçš„ç»å…¸æ´çªŸã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡VRè®¾å¤‡èº«ä¸´å…¶å¢ƒåœ°è§‚å¯Ÿå£ç”»ç»†èŠ‚ï¼Œç”šè‡³æ¯”ç°åœºè§‚çœ‹æ›´åŠ æ¸…æ™°ã€‚è¿™ä¸€ä¸¾æªæœ‰æ•ˆç¼“è§£äº†å®åœ°å‚è§‚ç»™æ–‡ç‰©å¸¦æ¥çš„ç¯å¢ƒå‹åŠ›ï¼Œæ˜¯â€œä¿æŠ¤ä¸å±•ç¤ºâ€å¹³è¡¡çš„å…¸èŒƒã€‚"
            },
            {
                id: 3,
                title: "æ°´ä¸‹è€ƒå¤æ–°çªç ´ï¼šé•¿æ±Ÿå£äºŒå·å¤èˆ¹æ•´ä½“æ‰“æå‡ºæ°´",
                date: "2024-03-10",
                summary: "è¿™æ˜¯ç›®å‰å›½å†…ä¹ƒè‡³ä¸–ç•Œä¸Šå‘ç°çš„ä½“é‡æœ€å¤§ã€ä¿å­˜æœ€ä¸ºå®Œæ•´ã€èˆ¹è½½æ–‡ç‰©æ•°é‡å·¨å¤§çš„å¤ä»£æœ¨è´¨æ²‰èˆ¹ä¹‹ä¸€ã€‚",
                content: "è¯¦ç»†å†…å®¹ï¼šé‡‡ç”¨äº†ä¸–ç•Œé¦–åˆ›çš„â€œå¼§å½¢æ¢éæ¥è§¦æ–‡ç‰©æ•´ä½“è¿ç§»æŠ€æœ¯â€ã€‚å¤èˆ¹å‡ºæ°´åï¼Œå°†è¢«é€å¾€ç‰¹åˆ¶çš„è€ƒå¤å®éªŒå®¤è¿›è¡Œåç»­çš„æ¸…ç†ä¸ä¿æŠ¤ã€‚èˆ¹ä¸Šè½½æœ‰å¤§é‡çš„æ™¯å¾·é•‡ç“·å™¨ï¼Œå¯¹äºç ”ç©¶æ¸…ä»£æ™šæœŸç»æµå²ã€è´¸æ˜“å²å…·æœ‰é‡è¦ä»·å€¼ã€‚"
            }
        ];

        // --- 2. INITIALIZATION & RENDERING ---

        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            renderArtifacts(artifacts);
            renderNews();
            
            // Mobile Menu Toggle
            const btn = document.getElementById('mobile-menu-btn');
            const menu = document.getElementById('mobile-menu');
            btn.addEventListener('click', () => {
                menu.classList.toggle('hidden');
            });
        });

        // --- 3. NAVIGATION ---

        function navigateTo(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.page-section');
            sections.forEach(sec => {
                sec.classList.add('hidden');
            });

            // Show selected section
            const activeSection = document.getElementById(sectionId);
            if (activeSection) {
                activeSection.classList.remove('hidden');
                // Re-trigger animations
                activeSection.classList.remove('fade-in');
                void activeSection.offsetWidth; // Trigger reflow
                activeSection.classList.add('fade-in');
            }

            // Close mobile menu if open
            document.getElementById('mobile-menu').classList.add('hidden');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // --- 4. ARTIFACT LOGIC (Museum) ---

        function renderArtifacts(data) {
            const grid = document.getElementById('artifact-grid');
            grid.innerHTML = '';

            data.forEach(item => {
                const card = document.createElement('div');
                card.className = "bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow cursor-pointer border border-stone-100 group";
                card.onclick = () => openModal(item);
                
                card.innerHTML = `
                    <div class="h-48 overflow-hidden relative">
                        <img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                        <div class="absolute top-2 right-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded">
                            ${getCategoryName(item.category)}
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-serif text-xl font-bold text-heritage-secondary mb-1">${item.name}</h3>
                        <p class="text-sm text-heritage-primary mb-2">${item.period}</p>
                        <p class="text-stone-500 text-sm line-clamp-2">${item.desc}</p>
                        <div class="mt-3 text-xs text-stone-400 border-t pt-2 flex justify-between">
                            <span>ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</span>
                            <span>â”</span>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function filterArtifacts(category) {
            // Update UI buttons
            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(btn => {
                if(btn.dataset.filter === category) {
                    btn.classList.add('bg-heritage-primary', 'text-white', 'border-transparent');
                } else {
                    btn.classList.remove('bg-heritage-primary', 'text-white', 'border-transparent');
                }
            });

            // Filter Data
            if (category === 'all') {
                renderArtifacts(artifacts);
            } else {
                const filtered = artifacts.filter(item => item.category === category);
                renderArtifacts(filtered);
            }
        }

        function getCategoryName(cat) {
            const map = {
                'bronze': 'é’é“œå™¨',
                'jade': 'ç‰å™¨',
                'ceramics': 'é™¶ç“·',
                'painting': 'ä¹¦ç”»'
            };
            return map[cat] || 'å…¶ä»–';
        }

        // --- 5. NEWS LOGIC ---
        
        function renderNews() {
            const container = document.getElementById('news-container');
            container.innerHTML = '';
            
            newsData.forEach(item => {
                const article = document.createElement('div');
                article.className = "bg-white border-l-4 border-stone-300 pl-6 py-2 transition-all hover:border-heritage-primary";
                article.innerHTML = `
                    <div class="flex justify-between items-start cursor-pointer" onclick="toggleNews(${item.id})">
                        <div>
                            <h3 class="text-xl font-bold text-heritage-secondary hover:text-heritage-primary transition-colors">${item.title}</h3>
                            <div class="text-xs text-stone-400 mt-1 mb-2">å‘å¸ƒæ—¥æœŸ: ${item.date}</div>
                        </div>
                        <span id="news-icon-${item.id}" class="text-2xl text-stone-300 transform transition-transform">+</span>
                    </div>
                    <p class="text-stone-600 mb-2">${item.summary}</p>
                    <div id="news-content-${item.id}" class="hidden mt-4 text-stone-800 bg-stone-50 p-4 rounded text-sm leading-relaxed border border-stone-100">
                        ${item.content}
                    </div>
                `;
                container.appendChild(article);
            });
        }

        function toggleNews(id) {
            const content = document.getElementById(`news-content-${id}`);
            const icon = document.getElementById(`news-icon-${id}`);
            
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                icon.textContent = '-';
                icon.classList.add('text-heritage-primary');
            } else {
                content.classList.add('hidden');
                icon.textContent = '+';
                icon.classList.remove('text-heritage-primary');
            }
        }

        // --- 6. MODAL SYSTEM & AI FEATURE #1 (AI GUIDE) ---

        function openModal(item) {
            const modal = document.getElementById('modal-overlay');
            const body = document.getElementById('modal-body');
            
            body.innerHTML = `
                <div class="flex flex-col md:flex-row">
                    <div class="md:w-1/2 h-64 md:h-auto">
                        <img src="${item.image}" class="w-full h-full object-cover rounded-t-lg md:rounded-l-lg md:rounded-tr-none">
                    </div>
                    <div class="p-8 md:w-1/2 flex flex-col justify-center max-h-[90vh] overflow-y-auto">
                        <div class="inline-block px-3 py-1 bg-heritage-primary text-white text-xs rounded-full w-fit mb-4">
                            ${getCategoryName(item.category)} â€¢ ${item.period}
                        </div>
                        <h2 class="font-serif text-3xl font-bold text-heritage-secondary mb-4">${item.name}</h2>
                        
                        <div class="space-y-4">
                            <div>
                                <h4 class="font-bold text-sm uppercase text-stone-400">æ–‡ç‰©æè¿°</h4>
                                <p class="text-stone-700 leading-relaxed">${item.desc}</p>
                            </div>
                            
                            <div class="bg-stone-50 p-4 rounded border border-stone-200">
                                <h4 class="font-bold text-sm uppercase text-heritage-primary mb-1">æ•°å­—åŒ–æ¡£æ¡ˆ / ä¿®å¤è®°å½•</h4>
                                <p class="text-sm text-stone-600">${item.details}</p>
                                <div class="mt-2 text-xs font-mono text-stone-400">å½“å‰çŠ¶æ€: ${item.status}</div>
                            </div>

                            <!-- GEMINI FEATURE: AI GUIDE BUTTON -->
                            <div class="pt-4 border-t border-dashed border-stone-300">
                                <button onclick="generateAIStory('${item.name}', '${item.period}', this)" class="w-full py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded hover:opacity-90 transition shadow flex justify-center items-center text-sm font-bold">
                                    <span>âœ¨ ç”Ÿæˆ AI æ™ºèƒ½è§£è¯´</span>
                                </button>
                                <div id="ai-story-output" class="hidden mt-3 p-3 bg-purple-50 text-stone-700 text-sm rounded border border-purple-100 leading-relaxed"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('modal-content').classList.remove('scale-95');
                document.getElementById('modal-content').classList.add('scale-100');
            }, 10);
        }

        async function generateAIStory(name, period, btn) {
            const outputDiv = btn.nextElementSibling;
            const originalText = btn.innerHTML;

            // UI Loading State
            btn.disabled = true;
            btn.innerHTML = `<span class="spinner border-white border-l-transparent"></span> æ­£åœ¨ç”Ÿæˆå†å²æ•…äº‹...`;
            outputDiv.classList.add('hidden');
            outputDiv.innerHTML = '';

            const prompt = `ä½ æ˜¯ä¸“ä¸šçš„åšç‰©é¦†é‡‘ç‰Œå¯¼è§ˆå‘˜ã€‚è¯·ä¸ºè§‚ä¼—ä»‹ç»ä¸€ä»¶ã€${period}ã€‘çš„æ–‡ç‰©ã€${name}ã€‘ã€‚è¯·ç”¨ç”ŸåŠ¨ã€æœ‰è¶£ã€ç•¥å¸¦æ•…äº‹æ€§çš„è¯­è¨€ï¼Œä»‹ç»å®ƒçš„å†å²èƒŒæ™¯ã€è‰ºæœ¯ä»·å€¼æˆ–å¯èƒ½å‘ç”Ÿçš„å†å²è¶£äº‹ã€‚å­—æ•°æ§åˆ¶åœ¨150å­—ä»¥å†…ã€‚`;

            // Call API
            const result = await callGeminiAPI(prompt);

            // Update UI
            btn.innerHTML = originalText;
            btn.disabled = false;
            outputDiv.innerHTML = `<strong>âœ¨ AI å¯¼è§ˆå‘˜ï¼š</strong><br>${result}`;
            outputDiv.classList.remove('hidden');
        }

        function closeModal() {
            const modal = document.getElementById('modal-overlay');
            const content = document.getElementById('modal-content');
            
            content.classList.remove('scale-100');
            content.classList.add('scale-95');
            
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 150);
        }

        // --- 7. AI FEATURE #2 (RESTORATION CONSULTANT) ---

        async function askRestorationAI() {
            const input = document.getElementById('ai-tech-input');
            const output = document.getElementById('ai-tech-output');
            const btn = document.getElementById('ai-tech-btn');
            const userQuestion = input.value.trim();

            if (!userQuestion) {
                alert("è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ï¼");
                return;
            }

            // UI Loading State
            const originalBtnText = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = `<span class="spinner border-white border-l-transparent"></span> AI æ€è€ƒä¸­...`;
            output.classList.add('hidden');

            const prompt = `ä½ æ˜¯ä¸€ä½èµ„æ·±çš„æ–‡ç‰©ä¿®å¤ä¸“å®¶å’Œæ•°å­—æ–‡ä¿æŠ€æœ¯é¡¾é—®ã€‚ç”¨æˆ·é—®äº†ä¸€ä¸ªå…³äºæ–‡ç‰©ä¿æŠ¤çš„é—®é¢˜ï¼šâ€œ${userQuestion}â€ã€‚è¯·ç”¨ä¸“ä¸šä½†é€šä¿—æ˜“æ‡‚çš„è¯­è¨€å›ç­”ï¼Œå¯ä»¥ç»“åˆä¼ ç»Ÿä¿®å¤å·¥è‰ºå’Œç°ä»£ç§‘æŠ€æ‰‹æ®µã€‚å­—æ•°æ§åˆ¶åœ¨200å­—å·¦å³ã€‚`;

            // Call API
            const result = await callGeminiAPI(prompt);

            // Update UI
            btn.innerHTML = originalBtnText;
            btn.disabled = false;
            output.innerHTML = `<strong>ğŸ’¡ ä¸“å®¶è§£ç­”ï¼š</strong><br>${result}`;
            output.classList.remove('hidden');
        }


        // --- 8. CHARTS (Chart.js) ---

        function initCharts() {
            // Home: Preservation Status Chart
            const ctx1 = document.getElementById('preservationChart').getContext('2d');
            new Chart(ctx1, {
                type: 'doughnut',
                data: {
                    labels: ['å®Œå¥½ä¿å­˜', 'è½»å¾®ç ´æŸ', 'æ€¥éœ€ä¿®å¤', 'æ­£åœ¨ä¿®å¤ä¸­'],
                    datasets: [{
                        data: [65, 20, 10, 5],
                        backgroundColor: ['#2c3e50', '#8c4b31', '#d4af37', '#e2e8f0'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });

            // Tech: Efficiency Chart
            const ctx2 = document.getElementById('techChart').getContext('2d');
            new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['ç¢ç‰‡æ‹¼å¯¹', 'é¢œè‰²è¿˜åŸ', 'ç—…å®³æ£€æµ‹', 'æ•°æ®å»ºæ¡£'],
                    datasets: [
                        {
                            label: 'ä¼ ç»Ÿäººå·¥è€—æ—¶ (å°æ—¶)',
                            data: [120, 48, 24, 72],
                            backgroundColor: '#9ca3af'
                        },
                        {
                            label: 'AI/æŠ€æœ¯è¾…åŠ©è€—æ—¶ (å°æ—¶)',
                            data: [40, 12, 4, 10],
                            backgroundColor: '#8c4b31'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true }
                    },
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
        }

        // --- 9. CONTACT FORM ---

        function handleContactSubmit(e) {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const btn = e.target.querySelector('button');
            const originalText = btn.innerText;

            btn.innerText = "å‘é€ä¸­...";
            btn.disabled = true;

            // Simulate Network Request
            setTimeout(() => {
                alert(`æ„Ÿè°¢æ‚¨çš„ç•™è¨€ï¼Œ${name}ï¼\næˆ‘ä»¬å·²æ”¶åˆ°æ‚¨çš„ä¿¡æ¯ï¼Œå·¥ä½œäººå‘˜å°†åœ¨3ä¸ªå·¥ä½œæ—¥å†…è”ç³»æ‚¨ã€‚`);
                e.target.reset();
                btn.innerText = originalText;
                btn.disabled = false;
            }, 1000);
        }

    </script>
</body>
</html>